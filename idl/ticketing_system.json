{"version":"0.1.0","name":"ticketing_system","instructions":[{"name":"initialize","accounts":[{"name":"authority","isMut":true,"isSigner":true},{"name":"treasury","isMut":false,"isSigner":false},{"name":"globalConfig","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"authority","type":"publicKey"},{"name":"treasury","type":"publicKey"},{"name":"marketplaceFeeBps","type":"u16"}]},{"name":"togglePause","accounts":[{"name":"globalConfig","isMut":true,"isSigner":false},{"name":"authority","isMut":false,"isSigner":true}],"args":[{"name":"paused","type":"bool"}]},{"name":"manageWhitelist","accounts":[{"name":"globalConfig","isMut":false,"isSigner":false},{"name":"authority","isMut":true,"isSigner":true},{"name":"whitelist","isMut":true,"isSigner":false},{"name":"wallet","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"walletAddress","type":"publicKey"},{"name":"isWhitelisted","type":"bool"}]},{"name":"createEvent","accounts":[{"name":"whitelistAccount","isMut":false,"isSigner":false},{"name":"eventAccount","isMut":true,"isSigner":false},{"name":"controller","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[{"name":"eventId","type":"u64"},{"name":"name","type":"string"},{"name":"description","type":"string"},{"name":"location","type":"string"},{"name":"imageUri","type":"string"},{"name":"metadataUriTemplate","type":"string"},{"name":"startDateTime","type":"i64"},{"name":"endDateTime","type":"i64"},{"name":"salesStartDate","type":"i64"},{"name":"salesEndDate","type":"i64"},{"name":"royaltyBps","type":"u16"},{"name":"maxTicketsPerWallet","type":"u8"},{"name":"tiersInput","type":{"vec":{"defined":"TierInput"}}}]},{"name":"addTicketTier","accounts":[{"name":"event","isMut":true,"isSigner":false},{"name":"controller","isMut":false,"isSigner":true}],"args":[{"name":"name","type":"string"},{"name":"priceLamports","type":"u64"},{"name":"maxTicketsSupply","type":"u32"}]},{"name":"addValidator","accounts":[{"name":"event","isMut":true,"isSigner":false},{"name":"controller","isMut":false,"isSigner":true}],"args":[{"name":"validator","type":"publicKey"}]},{"name":"removeValidator","accounts":[{"name":"event","isMut":true,"isSigner":false},{"name":"controller","isMut":false,"isSigner":true}],"args":[{"name":"validator","type":"publicKey"}]},{"name":"cancelEvent","accounts":[{"name":"event","isMut":true,"isSigner":false},{"name":"controller","isMut":false,"isSigner":true}],"args":[]},{"name":"withdrawFunds","accounts":[{"name":"event","isMut":false,"isSigner":false},{"name":"controller","isMut":true,"isSigner":true},{"name":"refundReserve","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"mintTicket","accounts":[{"name":"globalConfig","isMut":false,"isSigner":false},{"name":"event","isMut":true,"isSigner":false},{"name":"refundReserve","isMut":true,"isSigner":false},{"name":"buyer","isMut":true,"isSigner":true},{"name":"buyerTicketCount","isMut":true,"isSigner":false},{"name":"mintAccount","isMut":true,"isSigner":true},{"name":"metadataAccount","isMut":true,"isSigner":false},{"name":"associatedTokenAccount","isMut":true,"isSigner":false},{"name":"tokenMetadataProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"rent","isMut":false,"isSigner":false},{"name":"ticket","isMut":true,"isSigner":false}],"args":[{"name":"tierIndex","type":"u8"}]},{"name":"claimRefund","accounts":[{"name":"event","isMut":false,"isSigner":false},{"name":"buyer","isMut":true,"isSigner":true},{"name":"ticket","isMut":true,"isSigner":false},{"name":"nftToken","isMut":true,"isSigner":false},{"name":"nftMint","isMut":true,"isSigner":false},{"name":"refundReserve","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"listForSale","accounts":[{"name":"seller","isMut":true,"isSigner":true},{"name":"event","isMut":false,"isSigner":false},{"name":"ticket","isMut":false,"isSigner":false},{"name":"nftMint","isMut":false,"isSigner":false},{"name":"sellerTokenAccount","isMut":true,"isSigner":false},{"name":"listing","isMut":true,"isSigner":false},{"name":"escrowAccount","isMut":false,"isSigner":false},{"name":"escrowTokenAccount","isMut":true,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false}],"args":[{"name":"price","type":"u64"}]},{"name":"cancelListing","accounts":[{"name":"seller","isMut":true,"isSigner":true},{"name":"listing","isMut":true,"isSigner":false},{"name":"ticket","isMut":false,"isSigner":false},{"name":"nftMint","isMut":false,"isSigner":false},{"name":"escrowAccount","isMut":true,"isSigner":false},{"name":"sellerTokenAccount","isMut":true,"isSigner":false},{"name":"escrowTokenAccount","isMut":true,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"buyFromMarketplace","accounts":[{"name":"buyer","isMut":true,"isSigner":true},{"name":"listing","isMut":true,"isSigner":false},{"name":"seller","isMut":true,"isSigner":false},{"name":"treasury","isMut":true,"isSigner":false},{"name":"eventController","isMut":true,"isSigner":false},{"name":"ticket","isMut":true,"isSigner":false},{"name":"nftMint","isMut":false,"isSigner":false},{"name":"escrowAccount","isMut":true,"isSigner":false},{"name":"escrowTokenAccount","isMut":true,"isSigner":false},{"name":"buyerTokenAccount","isMut":true,"isSigner":false},{"name":"globalConfig","isMut":false,"isSigner":false},{"name":"event","isMut":false,"isSigner":false},{"name":"systemProgram","isMut":false,"isSigner":false},{"name":"tokenProgram","isMut":false,"isSigner":false},{"name":"associatedTokenProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"redeemTicket","accounts":[{"name":"ticket","isMut":true,"isSigner":false},{"name":"event","isMut":false,"isSigner":false},{"name":"validator","isMut":false,"isSigner":true},{"name":"owner","isMut":false,"isSigner":true},{"name":"nftToken","isMut":false,"isSigner":false},{"name":"nftMint","isMut":false,"isSigner":false}],"args":[]}],"accounts":[{"name":"BuyerTicketCount","type":{"kind":"struct","fields":[{"name":"event","type":"publicKey"},{"name":"buyer","type":"publicKey"},{"name":"count","type":"u8"}]}},{"name":"Event","type":{"kind":"struct","fields":[{"name":"eventId","type":"u64"},{"name":"controller","type":"publicKey"},{"name":"name","type":"string"},{"name":"description","type":"string"},{"name":"location","type":"string"},{"name":"imageUri","type":"string"},{"name":"metadataUriTemplate","type":"string"},{"name":"validators","type":{"vec":"publicKey"}},{"name":"startDateTime","type":"i64"},{"name":"endDateTime","type":"i64"},{"name":"salesStartDate","type":"i64"},{"name":"salesEndDate","type":"i64"},{"name":"totalTicketsSold","type":"u32"},{"name":"tiers","type":{"vec":{"defined":"TicketTier"}}},{"name":"maxTicketsPerWallet","type":"u8"},{"name":"resaleAllowed","type":"bool"},{"name":"transferFeeBps","type":"u16"},{"name":"royaltyBps","type":"u16"},{"name":"canceled","type":"bool"},{"name":"refundReserve","type":"publicKey"},{"name":"state","type":"u8"}]}},{"name":"GlobalConfig","type":{"kind":"struct","fields":[{"name":"authority","type":"publicKey"},{"name":"treasury","type":"publicKey"},{"name":"marketplaceFeeBps","type":"u16"},{"name":"paused","type":"bool"}]}},{"name":"MarketplaceListing","type":{"kind":"struct","fields":[{"name":"seller","type":"publicKey"},{"name":"nftMint","type":"publicKey"},{"name":"price","type":"u64"},{"name":"escrowAccount","type":"publicKey"}]}},{"name":"Ticket","type":{"kind":"struct","fields":[{"name":"event","type":"publicKey"},{"name":"nftMint","type":"publicKey"},{"name":"owner","type":"publicKey"},{"name":"redeemed","type":"bool"},{"name":"redeemedBy","type":"publicKey"},{"name":"redeemedAt","type":"i64"},{"name":"pricePaid","type":"u64"}]}},{"name":"Whitelist","type":{"kind":"struct","fields":[{"name":"wallet","type":"publicKey"},{"name":"isWhitelisted","type":"bool"}]}}],"types":[{"name":"TierInput","type":{"kind":"struct","fields":[{"name":"name","type":"string"},{"name":"priceLamports","type":"u64"},{"name":"maxTicketsSupply","type":"u32"}]}},{"name":"TicketTier","type":{"kind":"struct","fields":[{"name":"name","type":"string"},{"name":"priceLamports","type":"u64"},{"name":"maxTicketsSupply","type":"u32"},{"name":"ticketsSold","type":"u32"}]}},{"name":"EventState","type":{"kind":"enum","variants":[{"name":"Draft"},{"name":"Active"},{"name":"Finished"},{"name":"Canceled"}]}}],"events":[{"name":"TicketSold","fields":[{"name":"listingKey","type":"publicKey","index":false},{"name":"seller","type":"publicKey","index":false},{"name":"buyer","type":"publicKey","index":false},{"name":"nftMint","type":"publicKey","index":false},{"name":"price","type":"u64","index":false}]},{"name":"EventCanceled","fields":[{"name":"eventKey","type":"publicKey","index":false},{"name":"controller","type":"publicKey","index":false}]},{"name":"ListingCanceled","fields":[{"name":"listingKey","type":"publicKey","index":false},{"name":"nftMint","type":"publicKey","index":false},{"name":"seller","type":"publicKey","index":false}]},{"name":"RefundClaimed","fields":[{"name":"event","type":"publicKey","index":false},{"name":"nftMint","type":"publicKey","index":false},{"name":"buyer","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false},{"name":"timestamp","type":"i64","index":false}]},{"name":"EventCreated","fields":[{"name":"eventId","type":"u64","index":false},{"name":"controller","type":"publicKey","index":false},{"name":"name","type":"string","index":false}]},{"name":"ItemListed","fields":[{"name":"listingKey","type":"publicKey","index":false},{"name":"seller","type":"publicKey","index":false},{"name":"nftMint","type":"publicKey","index":false},{"name":"price","type":"u64","index":false}]},{"name":"TicketMinted","fields":[{"name":"ticketPda","type":"publicKey","index":false},{"name":"event","type":"publicKey","index":false},{"name":"owner","type":"publicKey","index":false},{"name":"nftMint","type":"publicKey","index":false}]},{"name":"TicketRedeemed","fields":[{"name":"ticketPda","type":"publicKey","index":false},{"name":"event","type":"publicKey","index":false},{"name":"redeemedBy","type":"publicKey","index":false},{"name":"owner","type":"publicKey","index":false}]},{"name":"FundsWithdrawn","fields":[{"name":"event","type":"publicKey","index":false},{"name":"controller","type":"publicKey","index":false},{"name":"amount","type":"u64","index":false}]}],"errors":[{"code":6000,"name":"ProgramPaused","msg":"Program is paused"},{"code":6001,"name":"NotWhitelisted","msg":"Not whitelisted"},{"code":6002,"name":"EventCanceled","msg":"Event is canceled"},{"code":6003,"name":"EventNotActive","msg":"Event is not active"},{"code":6004,"name":"SalesNotActive","msg":"Sales are not active"},{"code":6005,"name":"SoldOut","msg":"Event is sold out"},{"code":6006,"name":"SalesAlreadyStarted","msg":"Cannot add new tiers once sales have started."},{"code":6007,"name":"EventNotInProgress","msg":"Event is not in progress"},{"code":6008,"name":"MaxTiersReached","msg":"The maximum number of tiers for this event has been reached."},{"code":6009,"name":"TicketLimitExceeded","msg":"Ticket limit per wallet exceeded"},{"code":6010,"name":"InvalidTierIndex","msg":"Invalid ticket tier index."},{"code":6011,"name":"InvalidValidator","msg":"Invalid validator"},{"code":6012,"name":"AlreadyRedeemed","msg":"Ticket already redeemed"},{"code":6013,"name":"InvalidOwner","msg":"Invalid owner"},{"code":6014,"name":"ResaleNotAllowed","msg":"Resale not allowed"},{"code":6015,"name":"InvalidPrice","msg":"Invalid price"},{"code":6016,"name":"InsufficientFunds","msg":"Insufficient funds"},{"code":6017,"name":"MetadataUriTooLong","msg":"Metadata URI too long"},{"code":6018,"name":"NameTooLong","msg":"Name too long"},{"code":6019,"name":"DescriptionTooLong","msg":"Description too long"},{"code":6020,"name":"LocationTooLong","msg":"Location too long"},{"code":6021,"name":"InvalidAuthority","msg":"Invalid authority"},{"code":6022,"name":"InvalidController","msg":"Invalid controller"},{"code":6023,"name":"EventNotCanceled","msg":"Event not canceled"},{"code":6024,"name":"InvalidTicketEvent","msg":"Invalid ticket event"},{"code":6025,"name":"TicketRedeemed","msg":"Ticket already redeemed"},{"code":6026,"name":"InvalidSeller","msg":"Invalid seller"},{"code":6027,"name":"InvalidTicketMint","msg":"Invalid ticket mint"},{"code":6028,"name":"TicketsAlreadySold","msg":"Tickets already sold"},{"code":6029,"name":"NoTicketsSold","msg":"No tickets sold"},{"code":6030,"name":"EventNotEnded","msg":"Event not ended"},{"code":6031,"name":"MaxValidatorsReached","msg":"Cannot add more validators."},{"code":6032,"name":"EventMismatch","msg":"Eventos não condizem."},{"code":6033,"name":"EventAlreadyCanceled","msg":"This event has already been canceled."}]}